from random import randint 
from math import exp 


class SimulatedAnnealingGraph(Object): 

    def __init__(self, distMatrix, colorList, numCity): 
        self.cities = distMatrix
        self.colorList = colorList
        self.numcities = numCity
        self.redSet = set()
        self.blueSet = set()
        self.temp = 100
        self.alpha = .9995
        self.bestTour = None
        self.bestScore = None
        self.currentScore = None
        

    def visit_city(self, city): 
        if (city in redSet) or (city in blueSet): 
            if colorList[city] == 'R': 
                redSet.remove(city)
            else: 
                blueSet.remove(city)
        else: 
            print "Error: Invalid City"

    def is_valid_tour(self, tour):
        count = 0
        prev = 'X'
        for k in range(self._numCity):
            cur = self._colorList[tour[k]]
            if cur == prev:
                count += 1
                if count > 3:
                    return False
            else:
                prev = cur
                count = 1
        return True

    def select_random_tour(self): 

        """Returns a random tour"""

        pass

    def generate_probability(prevScore, nextScore, temperature): 
        if nextScore > prevScore: 
            return 1.0
        else: 
            return math.exp( -abs(next_score-prev_score)/temperature )

    def anneal(self, maxIterations, start_temp = self.temp, alpha = self.alpha): 
        
        """Returns a tour using simulated annealing."""

        numIterations = 0 

        while numIterations < maxIterations:
            



        
        
        

    

    
